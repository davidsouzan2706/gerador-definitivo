```html
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ferramenta de Criação de Vídeos</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary-color: #3b82f6;
            --secondary-color: #10b981;
            --dark-bg: #0f172a;
            --dark-card: #1e293b;
            --dark-text: #f1f5f9;
        }
        
        .dark {
            background-color: var(--dark-bg);
            color: var(--dark-text);
        }
        
        .dark .card {
            background-color: var(--dark-card);
        }
        
        .active-tab {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
        }
        
        .loading-spinner {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s linear infinite;
        }
        
        .loading-spinner-small {
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 25px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 5px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .script-section {
            display: none;
        }
        
        .script-section.active {
            display: block;
        }
        
        .card-background {
            background-color: #f8fafc;
        }
        
        .dark .card-background {
            background-color: #334155;
        }
        
        .retention-green {
            border-left: 4px solid #10b981;
        }
        
        .retention-yellow {
            border-left: 4px solid #f59e0b;
        }
        
        .retention-red {
            border-left: 4px solid #ef4444;
        }
        
        .progress-bar {
            height: 8px;
            background-color: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .dark .progress-bar {
            background-color: #334155;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--primary-color);
            transition: width 0.3s ease;
        }
        
        .completed-btn {
            position: relative;
        }
        
        .completed-btn::after {
            content: "✓";
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--secondary-color);
            font-weight: bold;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-200">
    <!-- Toast Container -->
    <div id="toast" class="toast"></div>
    
    <!-- Header -->
    <header class="bg-white dark:bg-gray-800 shadow-md py-4">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-blue-600 dark:text-blue-400">
                <i class="fas fa-video mr-2"></i>VideoCraft AI
            </h1>
            <div class="flex items-center space-x-4">
                <button id="themeToggle" class="p-2 rounded-full bg-gray-200 dark:bg-gray-700">
                    <i class="fas fa-moon dark:hidden"></i>
                    <i class="fas fa-sun hidden dark:inline"></i>
                </button>
                <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center">
                    <i class="fas fa-save mr-2"></i>Salvar Projeto
                </button>
            </div>
        </div>
    </header>
    
    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Progress Bar -->
        <div class="mb-8">
            <div class="flex justify-between mb-2">
                <span class="font-medium">Progresso do Projeto</span>
                <span id="progressText">0%</span>
            </div>
            <div class="progress-bar">
                <div id="progressFill" class="progress-fill" style="width: 0%"></div>
            </div>
        </div>
        
        <!-- Strategy Definition Section -->
        <section class="mb-10 card bg-white dark:bg-gray-800 rounded-xl shadow-md p-6">
            <div class="section-title mb-4">
                <h2 class="text-xl font-bold">1. Definir Estratégia</h2>
            </div>
            
            <div class="border-b border-gray-200 dark:border-gray-700 mb-6">
                <nav id="inputTabsNav" class="-mb-px flex flex-wrap md:flex-nowrap space-x-6" aria-label="Tabs">
                    <button data-tab="input-tab-basico" class="tab-button active-tab py-2 px-1 font-medium text-sm">
                        <i class="fas fa-info-circle mr-2"></i> Básico
                    </button>
                    <button data-tab="input-tab-estrategia" class="tab-button py-2 px-1 font-medium text-sm">
                        <i class="fas fa-chart-line mr-2"></i> Estratégia
                    </button>
                </nav>
            </div>
            
            <!-- Basic Inputs Tab -->
            <div id="input-tab-basico" class="tab-content">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium mb-2">Tema do Vídeo *</label>
                        <input type="text" id="videoTheme" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700" placeholder="Ex: Como Dobrar Sua Produtividade em 30 Dias">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Descrição do Vídeo *</label>
                        <textarea id="videoDescription" rows="3" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700" placeholder="Descreva detalhadamente o conteúdo do seu vídeo..."></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Público-Alvo</label>
                        <input type="text" id="targetAudience" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700" placeholder="Ex: Profissionais de TI, estudantes, empreendedores">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Objetivo do Vídeo</label>
                        <select id="videoObjective" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700">
                            <option value="educational">Educativo (Ensinar algo)</option>
                            <option value="entertainment">Entretenimento</option>
                            <option value="inspirational">Inspiracional</option>
                            <option value="promotional">Promocional (Venda)</option>
                        </select>
                    </div>
                </div>
                
                <div class="mt-6">
                    <button id="analyzeStrategyBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg flex items-center">
                        <i class="fas fa-brain mr-2"></i>Definir Estratégia com IA
                    </button>
                </div>
            </div>
            
            <!-- Strategy Inputs Tab -->
            <div id="input-tab-estrategia" class="tab-content hidden">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium mb-2">Tom Narrativo</label>
                        <select id="narrativeTone" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700">
                            <option value="informative">Informativo</option>
                            <option value="conversational">Conversacional</option>
                            <option value="authoritative">Autoritário</option>
                            <option value="humorous">Humorístico</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Objetivo Narrativo</label>
                        <select id="narrativeGoal" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700">
                            <option value="storytelling">Storytelling</option>
                            <option value="storyselling">Storyselling</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Estrutura Narrativa</label>
                        <select id="narrativeStructure" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700">
                            <option value="heros_journey">Jornada do Herói</option>
                            <option value="pixar_spine">Espinha Dorsal - Pixar</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Pergunta Central</label>
                        <input type="text" id="centralQuestion" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700" placeholder="Qual problema seu vídeo resolve?">
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Script Outline Section -->
        <section class="mb-10 card bg-white dark:bg-gray-800 rounded-xl shadow-md p-6">
            <div class="section-title mb-4">
                <h2 class="text-xl font-bold">2. Criar Esboço do Roteiro</h2>
            </div>
            
            <div id="outlineContent" class="mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                <div class="asset-card-placeholder text-center py-8 text-gray-500 dark:text-gray-400">
                    Clique em 'Criar Esboço' para a IA planejar a estrutura do roteiro.
                </div>
            </div>
            
            <button id="generateOutlineBtn" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg flex items-center">
                <i class="fas fa-project-diagram mr-2"></i>Criar Esboço com IA
            </button>
        </section>
        
        <!-- Script Sections -->
        <section id="scriptSectionsContainer" class="mb-10">
            <div class="section-title mb-4">
                <h2 class="text-xl font-bold">3. Desenvolver Seções do Roteiro</h2>
            </div>
            
            <!-- Navigation Tabs for Script Sections -->
            <div class="border-b border-gray-200 dark:border-gray-700 mb-6">
                <nav class="flex flex-wrap md:flex-nowrap space-x-4 overflow-x-auto">
                    <button data-section="intro" class="section-tab py-2 px-4 font-medium text-sm rounded-t-lg bg-gray-100 dark:bg-gray-700">
                        Introdução
                    </button>
                    <button data-section="development" class="section-tab py-2 px-4 font-medium text-sm rounded-t-lg bg-gray-100 dark:bg-gray-700">
                        Desenvolvimento
                    </button>
                    <button data-section="climax" class="section-tab py-2 px-4 font-medium text-sm rounded-t-lg bg-gray-100 dark:bg-gray-700">
                        Clímax
                    </button>
                    <button data-section="conclusion" class="section-tab py-2 px-4 font-medium text-sm rounded-t-lg bg-gray-100 dark:bg-gray-700">
                        Conclusão + CTA
                    </button>
                </nav>
            </div>
            
            <!-- Introduction Section -->
            <div id="introSection" class="script-section card bg-white dark:bg-gray-800 rounded-xl shadow-md p-6">
                <div class="generated-content-wrapper mb-6 min-h-[100px] p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                    <!-- Generated content will appear here -->
                </div>
                <button id="generateIntroBtn" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg flex items-center">
                    <i class="fas fa-play mr-2"></i>Gerar Introdução
                </button>
            </div>
            
            <!-- Development Section -->
            <div id="developmentSection" class="script-section card bg-white dark:bg-gray-800 rounded-xl shadow-md p-6">
                <div class="generated-content-wrapper mb-6 min-h-[100px] p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                    <!-- Generated content will appear here -->
                </div>
                <div class="flex flex-wrap gap-3 mb-4">
                    <button id="generateDevelopmentBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg flex items-center">
                        <i class="fas fa-file-alt mr-2"></i>Gerar Desenvolvimento
                    </button>
                    <button id="continueDevelopmentBtn" class="bg-indigo-700 hover:bg-indigo-800 text-white px-6 py-3 rounded-lg flex items-center">
                        <i class="fas fa-plus-circle mr-2"></i>Continuar Desenvolvimento
                    </button>
                </div>
            </div>
            
            <!-- Climax Section -->
            <div id="climaxSection" class="script-section card bg-white dark:bg-gray-800 rounded-xl shadow-md p-6">
                <div class="generated-content-wrapper mb-6 min-h-[100px] p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                    <!-- Generated content will appear here -->
                </div>
                <button id="climaxBtn" class="bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg flex items-center">
                    <i class="fas fa-bolt mr-2"></i>Gerar Clímax
                </button>
            </div>
            
            <!-- Conclusion + CTA Section -->
            <div id="conclusionSection" class="script-section card bg-white dark:bg-gray-800 rounded-xl shadow-md p-6">
                <div class="generated-content-wrapper mb-6 min-h-[100px] p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                    <!-- Generated content will appear here -->
                </div>
                
                <!-- Conclusion Strategy Module -->
                <div id="conclusionStrategyModule" class="mb-6 p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-200 dark:border-blue-800">
                    <h3 class="font-bold mb-3">Estratégia da Conclusão</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <label class="flex items-center">
                            <input type="radio" name="conclusionType" value="lesson" class="mr-2">
                            <span>Reforçar Lição</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="conclusionType" value="answer" class="mr-2">
                            <span>Responder Pergunta</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="conclusionType" value="cliffhanger" class="mr-2">
                            <span>Criar Gancho</span>
                        </label>
                    </div>
                    <input type="text" id="conclusionSpecifics" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 mb-3" placeholder="Detalhes específicos da conclusão...">
                    <button id="generateConclusionAndCtaBtn" class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded">
                        Gerar Conclusão + CTA
                    </button>
                </div>
            </div>
        </section>
        
        <!-- Final Assets Section -->
        <section class="card bg-white dark:bg-gray-800 rounded-xl shadow-md p-6">
            <div class="section-title mb-4">
                <h2 class="text-xl font-bold">4. Gerar Recursos Finais</h2>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="card bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                    <h3 class="font-bold mb-3">Títulos e Miniaturas</h3>
                    <div id="titlesThumbnailsContent" class="mb-4 min-h-[100px] p-3 bg-white dark:bg-gray-600 rounded">
                        <div class="asset-card-placeholder text-gray-500 dark:text-gray-400">
                            Clique em 'Gerar' para ver as sugestões
                        </div>
                    </div>
                    <button id="generateTitlesBtn" class="bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded">
                        Gerar Títulos e Miniaturas
                    </button>
                </div>
                
                <div class="card bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                    <h3 class="font-bold mb-3">Descrição do Vídeo</h3>
                    <div id="videoDescriptionContent" class="mb-4 min-h-[100px] p-3 bg-white dark:bg-gray-600 rounded">
                        <div class="asset-card-placeholder text-gray-500 dark:text-gray-400">
                            Clique em 'Gerar' para ver a descrição
                        </div>
                    </div>
                    <button id="generateDescriptionBtn" class="bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded">
                        Gerar Descrição
                    </button>
                </div>
            </div>
        </section>
    </main>
    
    <script>
        // DOM Elements
        const elements = {
            videoTheme: document.getElementById('videoTheme'),
            videoDescription: document.getElementById('videoDescription'),
            targetAudience: document.getElementById('targetAudience'),
            videoObjective: document.getElementById('videoObjective'),
            narrativeTone: document.getElementById('narrativeTone'),
            narrativeGoal: document.getElementById('narrativeGoal'),
            narrativeStructure: document.getElementById('narrativeStructure'),
            centralQuestion: document.getElementById('centralQuestion'),
            outlineContent: document.getElementById('outlineContent'),
            fullScreenAlertOverlay: document.getElementById('fullScreenAlertOverlay'),
            fullScreenAlertMessage: document.getElementById('fullScreenAlertMessage')
        };
        
        // State variables
        let strategicOutline = null;
        let isSettingStrategy = false;
        let allImagePrompts = {};
        let promptPaginationState = {};
        let totalScriptSeconds = 0;
        let window = window;
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Set up tab navigation
            setupTabNavigation();
            
            // Set up section tabs
            setupSectionTabs();
            
            // Set up button event listeners
            setupEventListeners();
            
            // Set up conclusion strategy module
            setupConclusionStrategy();
            
            // Initialize theme
            initializeTheme();
        });
        
        // Tab Navigation
        function setupTabNavigation() {
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Remove active class from all buttons
                    tabButtons.forEach(btn => btn.classList.remove('active-tab'));
                    
                    // Add active class to clicked button
                    button.classList.add('active-tab');
                    
                    // Hide all tab contents
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.add('hidden');
                    });
                    
                    // Show the corresponding tab content
                    const tabId = button.getAttribute('data-tab');
                    document.getElementById(tabId).classList.remove('hidden');
                });
            });
        }
        
        // Section Tabs
        function setupSectionTabs() {
            const sectionTabs = document.querySelectorAll('.section-tab');
            sectionTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs
                    sectionTabs.forEach(t => {
                        t.classList.remove('bg-blue-500', 'text-white');
                        t.classList.add('bg-gray-100', 'dark:bg-gray-700');
                    });
                    
                    // Add active class to clicked tab
                    tab.classList.remove('bg-gray-100', 'dark:bg-gray-700');
                    tab.classList.add('bg-blue-500', 'text-white');
                    
                    // Hide all sections
                    document.querySelectorAll('.script-section').forEach(section => {
                        section.classList.remove('active');
                    });
                    
                    // Show the corresponding section
                    const sectionId = tab.getAttribute('data-section') + 'Section';
                    document.getElementById(sectionId).classList.add('active');
                });
            });
            
            // Activate the first tab by default
            if (sectionTabs.length > 0) {
                sectionTabs[0].click();
            }
        }
        
        // Event Listeners
        function setupEventListeners() {
            // Theme toggle
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
            
            // Strategy buttons
            document.getElementById('analyzeStrategyBtn').addEventListener('click', analyzeAndSetStrategy);
            document.getElementById('generateOutlineBtn').addEventListener('click', generateStrategicOutline);
            
            // Script section buttons
            document.getElementById('generateIntroBtn').addEventListener('click', () => handleGenerateSection(document.getElementById('generateIntroBtn'), 'intro', 'Introdução', 'intro'));
            document.getElementById('generateDevelopmentBtn').addEventListener('click', () => handleGenerateSection(document.getElementById('generateDevelopmentBtn'), 'development', 'Desenvolvimento', 'development'));
            document.getElementById('continueDevelopmentBtn').addEventListener('click', continueDevelopment);
            document.getElementById('climaxBtn').addEventListener('click', () => handleGenerateSection(document.getElementById('climaxBtn'), 'climax', 'Clímax', 'climax'));
            document.getElementById('generateConclusionAndCtaBtn').addEventListener('click', generateConclusionAndCta);
            
            // Final asset buttons
            document.getElementById('generateTitlesBtn').addEventListener('click', generateTitlesAndThumbnails);
            document.getElementById('generateDescriptionBtn').addEventListener('click', generateVideoDescription);
        }
        
        // Conclusion Strategy Module
        function setupConclusionStrategy() {
            const conclusionModule = document.getElementById('conclusionStrategyModule');
            if (conclusionModule) {
                conclusionModule.classList.add('hidden');
                
                // Add event listeners to radio buttons
                document.querySelectorAll('input[name="conclusionType"]').forEach(radio => {
                    radio.addEventListener('change', handleConclusionStrategyChange);
                });
                
                // Set initial state
                handleConclusionStrategyChange();
            }
        }
        
        // Handle conclusion strategy change
        function handleConclusionStrategyChange() {
            const selectedType = document.querySelector('input[name="conclusionType"]:checked');
            const specificsInput = document.getElementById('conclusionSpecifics');
            
            if (selectedType) {
                specificsInput.placeholder = getConclusionPlaceholder(selectedType.value);
            }
        }
        
        // Get placeholder for conclusion specifics
        function getConclusionPlaceholder(type) {
            switch(type) {
                case 'lesson':
                    return 'Qual lição ou reflexão central deseja reforçar?';
                case 'answer':
                    return 'Qual resposta clara deseja fornecer?';
                case 'cliffhanger':
                    return 'Que mistério ou gancho deseja criar?';
                default:
                    return 'Detalhes específicos da conclusão...';
            }
        }
        
        // Theme Toggle
        function initializeTheme() {
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (prefersDark) {
                document.documentElement.classList.add('dark');
            }
        }
        
        function toggleTheme() {
            document.documentElement.classList.toggle('dark');
        }
        
        // Show Toast Message
        window.showToast = function(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        };
        
        // Show Button Loading
        function showButtonLoading(button) {
            button.disabled = true;
            const originalHTML = button.innerHTML;
            button.setAttribute('data-original-html', originalHTML);
            button.innerHTML = `<div class="loading-spinner"></div>`;
        }
        
        // Hide Button Loading
        function hideButtonLoading(button) {
            button.disabled = false;
            const originalHTML = button.getAttribute('data-original-html');
            if (originalHTML) {
                button.innerHTML = originalHTML;
            }
        }
        
        // Reset Project Outputs
        function resetProjectOutputs() {
            // Reset outline
            const outlineContent = document.getElementById('outlineContent');
            if (outlineContent) {
                outlineContent.innerHTML = `<div class="asset-card-placeholder text-center py-8 text-gray-500 dark:text-gray-400">
                    Clique em 'Criar Esboço' para a IA planejar a estrutura do roteiro.
                </div>`;
            }
            
            // Reset script sections
            const sections = ['intro', 'development', 'climax', 'conclusion'];
            sections.forEach(section => {
                const sectionElement = document.getElementById(`${section}Section`);
                if (sectionElement) {
                    const contentWrapper = sectionElement.querySelector('.generated-content-wrapper');
                    if (contentWrapper) {
                        contentWrapper.innerHTML = '';
                    }
                }
            });
            
            // Reset final assets
            const assetContainers = [
                'titlesThumbnailsContent',
                'videoDescriptionContent'
            ];
            
            assetContainers.forEach(containerId => {
                const container = document.getElementById(containerId);
                if (container) {
                    container.innerHTML = `<div class="asset-card-placeholder text-gray-500 dark:text-gray-400">
                        Clique em 'Gerar' para ver as sugestões
                    </div>`;
                }
            });
            
            // Reset state variables
            strategicOutline = null;
            allImagePrompts = {};
            promptPaginationState = {};
            totalScriptSeconds = 0;
            
            // Update progress
            updateProgressBar();
        }
        
        // Update Progress Bar
        function updateProgressBar() {
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            
            if (!progressFill || !progressText) return;
            
            // Calculate progress based on completed sections
            let progress = 0;
            const totalSteps = 8; // Define total steps
            
            // Check if strategy is set
            if (strategicOutline) progress += 20;
            
            // Check if outline is generated
            const outlineContent = document.getElementById('outlineContent');
            if (outlineContent && outlineContent.textContent.trim() !== '' && 
                !outlineContent.querySelector('.asset-card-placeholder')) {
                progress += 20;
            }
            
            // Check if script sections have content
            const sections = ['intro', 'development', 'climax', 'conclusion'];
            let sectionsCompleted = 0;
            
            sections.forEach(section => {
                const sectionElement = document.getElementById(`${section}Section`);
                if (sectionElement) {
                    const contentWrapper = sectionElement.querySelector('.generated-content-wrapper');
                    if (contentWrapper && contentWrapper.textContent.trim() !== '') {
                        sectionsCompleted++;
                    }
                }
            });
            
            progress += (sectionsCompleted / sections.length) * 40;
            
            // Check if final assets are generated
            const finalAssets = ['titlesThumbnailsContent', 'videoDescriptionContent'];
            let assetsCompleted = 0;
            
            finalAssets.forEach(assetId => {
                const assetElement = document.getElementById(assetId);
                if (assetElement && assetElement.textContent.trim() !== '' && 
                    !assetElement.querySelector('.asset-card-placeholder')) {
                    assetsCompleted++;
                }
            });
            
            progress += (assetsCompleted / finalAssets.length) * 20;
            
            // Update UI
            progressFill.style.width = `${progress}%`;
            progressText.textContent = `${Math.round(progress)}%`;
        }
        
        // Validate Inputs
        function validateInputs() {
            const theme = document.getElementById('videoTheme')?.value.trim();
            const description = document.getElementById('videoDescription')?.value.trim();
            
            if (!theme || !description) {
                window.showToast("Preencha o Tema e a Descrição do Vídeo.");
                return false;
            }
            
            return true;
        }
        
        // Analyze and Set Strategy
        async function analyzeAndSetStrategy() {
            const button = document.getElementById('analyzeStrategyBtn');
            
            if (!validateInputs()) return;
            
            showButtonLoading(button);
            isSettingStrategy = true;
            
            try {
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                // Mock strategy response
                const mockStrategy = {
                    target_audience: "Profissionais que buscam aumentar sua produtividade",
                    video_objective: "Educativo (Ensinar algo)",
                    narrative_tone: "Conversacional",
                    narrative_goal: "Storytelling",
                    narrative_structure: "heros_journey",
                    narrative_voice: "Um especialista em produtividade",
                    central_question: "Como posso dobrar minha produtividade em 30 dias?",
                    emotional_arc: "Curiosidade -> Inspiração -> Ação",
                    image_description_engine: "produtividade, workspace, foco"
                };
                
                // Update UI with strategy
                document.getElementById('targetAudience').value = mockStrategy.target_audience;
                document.getElementById('videoObjective').value = mockStrategy.video_objective;
                document.getElementById('narrativeTone').value = mockStrategy.narrative_tone;
                document.getElementById('narrativeGoal').value = mockStrategy.narrative_goal;
                document.getElementById('narrativeStructure').value = mockStrategy.narrative_structure;
                document.getElementById('centralQuestion').value = mockStrategy.central_question;
                
                // Show success message
                window.showToast("Estratégia definida com sucesso!");
                
                // Switch to strategy tab
                document.querySelector('[data-tab="input-tab-estrategia"]').click();
                
                // Show conclusion strategy module
                const conclusionModule = document.getElementById('conclusionStrategyModule');
                if (conclusionModule) {
                    conclusionModule.classList.remove('hidden');
                }
            } catch (error) {
                window.showToast(`Falha ao definir estratégia: ${error.message}`);
            } finally {
                isSettingStrategy = false;
                hideButtonLoading(button);
                updateProgressBar();
            }
        }
        
        // Generate Strategic Outline
        async function generateStrategicOutline() {
            const button = document.getElementById('generateOutlineBtn');
            
            if (!validateInputs()) return;
            
            showButtonLoading(button);
            
            const outlineContentDiv = document.getElementById('outlineContent');
            if (outlineContentDiv) {
                outlineContentDiv.innerHTML = `<div class="flex justify-center py-8"><div class="loading-spinner-small"></div></div>`;
            }
            
            try {
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Mock outline response
                strategicOutline = {
                    introduction: "Apresentar o problema da baixa produtividade e prometer uma solução surpreendente.",
                    development: "Explicar os 5 princípios fundamentais para dobrar a produtividade em 30 dias.",
                    climax: "Revelar o 'segredo' mais poderoso que mudou a vida do apresentador.",
                    conclusion: "Resumir os pontos principais e incentivar a ação imediata.",
                    cta: "Convidar para um curso premium sobre produtividade avançada."
                };
                
                // Display outline
                let outlineHTML = '<div class="space-y-4">';
                for (const [key, value] of Object.entries(strategicOutline)) {
                    const title = {
                        introduction: 'Introdução',
                        development: 'Desenvolvimento',
                        climax: 'Clímax',
                        conclusion: 'Conclusão',
                        cta: 'CTA'
                    }[key];
                    
                    outlineHTML += `
                        <div class="p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500">
                            <h4 class="font-bold text-lg mb-2">${title}</h4>
                            <p>${value}</p>
                        </div>
                    `;
                }
                outlineHTML += '</div>';
                
                outlineContentDiv.innerHTML = outlineHTML;
                
                window.showToast("Esboço criado com sucesso!");
            } catch (error) {
                outlineContentDiv.innerHTML = `<div class="asset-card-placeholder text-center py-8 text-gray-500 dark:text-gray-400">
                    Clique em 'Criar Esboço' para a IA planejar a estrutura do roteiro.
                </div>`;
                window.showToast(`Falha ao criar esboço: ${error.message}`);
            } finally {
                hideButtonLoading(button);
                updateProgressBar();
            }
        }
        
        // Handle Generate Section
        async function handleGenerateSection(button, sectionName, sectionTitle, elementId) {
            if (!validateInputs()) return;
            
            if (!strategicOutline) {
                window.showToast("Crie o Esboço Estratégico primeiro!");
                return;
            }
            
            showButtonLoading(button);
            
            const targetSectionElement = document.getElementById(`${elementId}Section`);
            const contentWrapper = targetSectionElement.querySelector('.generated-content-wrapper');
            
            try {
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 2500));
                
                // Mock content based on section
                let content = '';
                switch(sectionName) {
                    case 'intro':
                        content = "Você já se sentiu sobrecarregado com tantas tarefas que nem sabe por onde começar? Hoje vou compartilhar um segredo que me ajudou a dobrar minha produtividade em apenas 30 dias. E o melhor: você pode aplicar isso imediatamente!";
                        break;
                    case 'development':
                        content = "O primeiro princípio é a técnica do pomodoro, que consiste em trabalhar por 25 minutos e descansar por 5. O segundo é a regra dos dois minutos: se uma tarefa leva menos de dois minutos, faça imediatamente. O terceiro é priorizar tarefas pela matriz de Eisenhower...";
                        break;
                    case 'climax':
                        content = "Mas o segredo mais poderoso que descobri foi o 'bloqueio de tempo'. Em vez de esperar inspiração, eu bloqueio horários específicos para minhas tarefas mais importantes. Isso mudou completamente minha relação com o trabalho!";
                        break;
                    case 'conclusion':
                        content = "Agora você tem 5 ferramentas poderosas para dobrar sua produtividade. O segredo não é trabalhar mais, mas trabalhar melhor. Qual dessas técnicas você vai experimentar primeiro? Deixe nos comentários!";
                        break;
                }
                
                // Display content
                contentWrapper.innerHTML = `<p>${content}</p>`;
                
                window.showToast(`${sectionTitle} gerada com sucesso!`);
            } catch (error) {
                window.showToast(`Falha ao gerar ${sectionTitle}: ${error.message}`);
            } finally {
                hideButtonLoading(button);
                updateProgressBar();
            }
        }
        
        // Continue Development
        async function continueDevelopment() {
            const button = document.getElementById('continueDevelopmentBtn');
            const devSection = document.getElementById('developmentSection');
            const contentWrapper = devSection.querySelector('.generated-content-wrapper');
            const existingText = contentWrapper.textContent;
            
            if (!existingText) {
                window.showToast("Gere o desenvolvimento inicial primeiro.");
                return;
            }
            
            showButtonLoading(button);
            
            try {
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Mock additional content
                const newContent = "Além disso, descobri que a organização do ambiente de trabalho tem um impacto direto na produtividade. Um workspace limpo e organizado pode aumentar sua eficiência em até 25%. Outra dica é usar a técnica do 'batching', onde você agrupa tarefas similares para realizá-las em blocos de tempo dedicados.";
                
                contentWrapper.innerHTML += `<br><br><p>${newContent}</p>`;
                
                window.showToast("Desenvolvimento continuado com sucesso!");
            } catch (error) {
                window.showToast(`Falha ao continuar desenvolvimento: ${error.message}`);
            } finally {
                hideButtonLoading(button);
                updateProgressBar();
            }
        }
        
        // Generate Conclusion and CTA
        async function generateConclusionAndCta() {
            const button = document.getElementById('generateConclusionAndCtaBtn');
            
            if (!validateInputs()) return;
            
            showButtonLoading(button);
            
            const conclusionType = document.querySelector('input[name="conclusionType"]:checked')?.value || 'lesson';
            const conclusionSpecifics = document.getElementById('conclusionSpecifics').value.trim();
            
            try {
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                // Mock conclusion content
                let conclusionContent = '';
                switch(conclusionType) {
                    case 'lesson':
                        conclusionContent = "A produtividade não se trata de fazer mais, mas de fazer o que realmente importa. Lembre-se: pequenas mudanças consistentes levam a grandes resultados.";
                        break;
                    case 'answer':
                        conclusionContent = "A resposta para dobrar sua produtividade está em aplicar consistentemente essas 5 técnicas que compartilhei hoje. A chave é começar com uma e dominá-la antes de avançar para a próxima.";
                        break;
                    case 'cliffhanger':
                        conclusionContent = "Mas espere, há um sexto segredo que poucos conhecem... Na próxima semana vou revelar a técnica avançada que levou minha produtividade ao próximo nível. Você não vai querer perder!";
                        break;
                }
                
                // Add CTA
                conclusionContent += " Se este vídeo te ajudou, não se esqueça de curtir, compartilhar e se inscrever para mais dicas como essa. Até a próxima!";
                
                // Display content
                const conclusionSection = document.getElementById('conclusionSection');
                const contentWrapper = conclusionSection.querySelector('.generated-content-wrapper');
                contentWrapper.innerHTML = `<p>${conclusionContent}</p>`;
                
                window.showToast("Conclusão e CTA gerados com sucesso!");
            } catch (error) {
                window.showToast(`Falha ao gerar conclusão: ${error.message}`);
            } finally {
                hideButtonLoading(button);
                updateProgressBar();
            }
        }
        
        // Generate Titles and Thumbnails
        async function generateTitlesAndThumbnails() {
            const button = document.getElementById('generateTitlesBtn');
            
            if (!validateInputs()) return;
            
            showButtonLoading(button);
            
            const titlesContent = document.getElementById('titlesThumbnailsContent');
            titlesContent.innerHTML = `<div class="flex justify-center py-8"><div class="loading-spinner-small"></div></div>`;
            
            try {
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                // Mock titles and thumbnails
                const mockTitles = [
                    "DOBRE SUA PRODUTIVIDADE EM 30 DIAS (Técnica Secreta Revelada!)",
                    "5 Erros de Produtividade Que Estão Te Atrasando (Evite Isso AGORA!)",
                    "Como Trabalhar Menos e Conquistar Mais (Segredo dos Milionários)"
                ];
                
                let titlesHTML = '<div class="space-y-4">';
                mockTitles.forEach((title, index) => {
                    titlesHTML += `
                        <div class="p-3 bg-white dark:bg-gray-600 rounded border border-gray-200 dark:border-gray-500">
                            <div class="flex items-start">
                                <div class="bg-gray-200 border-2 border-dashed rounded-xl w-16 h-16 mr-3" />
                                <div>
                                    <h4 class="font-bold">Opção ${index + 1}</h4>
                                    <p class="mt-1">${title}</p>
                                </div>
                            </div>
                        </div>
                    `;
                });
                titlesHTML += '</div>';
                
                titlesContent.innerHTML = titlesHTML;
                
                window.showToast("Títulos e miniaturas gerados com sucesso!");
            } catch (error) {
                titlesContent.innerHTML = `<div class="asset-card-placeholder text-gray-500 dark:text-gray-400">
                    Clique em 'Gerar' para ver as sugestões
                </div>`;
                window.showToast(`Falha ao gerar títulos: ${error.message}`);
            } finally {
                hideButtonLoading(button);
                updateProgressBar();
            }
        }
        
        // Generate Video Description
        async function generateVideoDescription() {
            const button = document.getElementById('generateDescriptionBtn');
            
            if (!validateInputs()) return;
            
            showButtonLoading(button);
            
            const descriptionContent = document.getElementById('videoDescriptionContent');
            descriptionContent.innerHTML = `<div class="flex justify-center py-8"><div class="loading-spinner-small"></div></div>`;
            
            try {
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                // Mock description content
                const mockDescription = `
                    Neste vídeo, você vai descobrir como dobrar sua produtividade em apenas 30 dias usando técnicas comprovadas por especialistas. 
                    
                    ✅ Aprenda a técnica do pomodoro
                    ✅ Descubra a regra dos dois minutos
                    ✅ Domine o poder do bloqueio de tempo
                    ✅ Organize seu workspace para máxima eficiência
                    
                    Se você se sente sobrecarregado com tarefas e não consegue terminar seus projetos, este vídeo é para você. Implemente essas estratégias e veja sua produtividade explodir!
                    
                    #produtividade #gestãodotempo #trabalhoprodutivo #foco #eficiência
                `;
                
                descriptionContent.innerHTML = `<p class="whitespace-pre-line">${mockDescription}</p>`;
                
                window.showToast("Descrição gerada com sucesso!");
            } catch (error) {
                descriptionContent.innerHTML = `<div class="asset-card-placeholder text-gray-500 dark:text-gray-400">
                    Clique em 'Gerar' para ver a descrição
                </div>`;
                window.showToast(`Falha ao gerar descrição: ${error.message}`);
            } finally {
                hideButtonLoading(button);
                updateProgressBar();
            }
        }
    </script>
</body>
</html>
```